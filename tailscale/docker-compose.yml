---
version: '3'
services:
  tailscale:
    container_name: tailscale
    hostname: tailscale-vpn
    image: tailscale/tailscale:stable
    volumes:
      - /opt/tailscale-vpn:/var/lib # State data will be stored in this directory
      - /dev/net/tun:/dev/net/tun # Required for tailscale to work
    cap_add:
      - net_admin
      - sys_module
    command: tailscaled
    privileged: true
    restart: unless-stopped
    network_mode: host
    env_file:
      - .env
    labels:
      - 'kopia_backup'

# Login
# docker-compose exec tailscale tailscale up

# Get status
# docker exec tailscale tailscale status
